import{c as Y,j as e,u as re,a as oe,r as u}from"./index-Bpz0FMYO.js";import{a as B,F as O}from"./Footer-BOjN0BCE.js";import{g as ne}from"./index-BECU9pNv.js";import{L as ce}from"./lock-B0Pbul_F.js";import{C as ie}from"./check-C7VJxLvu.js";import{L as U}from"./loader-circle-z9yUUUXF.js";import"./logo-CU3fsl7Q.js";import"./button-DIaYmcs-.js";import"./shopping-bag-pzB3G9rq.js";import"./user-BHbKF2ND.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),me=({items:r,total:c,removeFromCart:v})=>e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-700/80 p-6 sticky top-24 shadow-xl",children:[e.jsx("h2",{className:"font-semibold text-lg mb-6 text-white",children:"Resumo do Pedido"}),e.jsx("div",{className:"space-y-4 mb-6 pb-6 border-b border-zinc-700 max-h-96 overflow-y-auto",children:r.map(x=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:x.image,alt:x.name,className:"h-16 w-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("h3",{className:"font-medium text-zinc-100",children:x.name}),e.jsxs("p",{className:"text-zinc-400",children:["Qty: ",x.quantity]}),e.jsxs("p",{className:"font-bold text-sky-400 mt-1",children:["R$ ",(x.price*x.quantity).toFixed(2)]})]}),e.jsx("button",{onClick:()=>v(x.id),className:"text-red-400 hover:bg-red-500/10 p-1 rounded",children:e.jsx(ne,{className:"h-4 w-4"})})]},x.id))}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-zinc-400",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium text-zinc-100",children:["R$ ",c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-zinc-400",children:"Frete:"}),e.jsx("span",{className:"text-zinc-400",children:"A cobrar"})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-3 border-t border-zinc-700",children:[e.jsx("span",{className:"text-white",children:"Total:"}),e.jsxs("span",{className:"text-white",children:["R$ ",c.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 bg-zinc-800/80 p-3 rounded-lg",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Pagamento 100% seguro"})]})]}),xe=({customerData:r,setCustomerData:c,fetchAddressByCep:v,formatCep:x,loadingCep:f})=>{const g="w-full px-4 py-2.5 rounded-lg bg-zinc-800 border border-zinc-600 text-white placeholder-zinc-500 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/20 text-sm transition-all";return e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-700/80 p-6 mb-6 shadow-xl",children:[e.jsx("h2",{className:"font-semibold text-lg mb-5 text-white",children:"Dados de Entrega"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:i=>c({...r,email:i.target.value}),placeholder:"seu@email.com",className:g})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Nome Completo"}),e.jsx("input",{type:"text",value:r.name,onChange:i=>c({...r,name:i.target.value}),placeholder:"Seu nome",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Telefone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:i=>c({...r,phone:i.target.value}),placeholder:"(11) 99999-9999",className:g})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-700",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-300 mb-3",children:"Endere√ßo de entrega"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"CEP"}),e.jsx("input",{type:"text",value:r.cep,onChange:i=>c({...r,cep:x(i.target.value)}),onBlur:()=>v(r.cep),placeholder:"00000-000",maxLength:9,className:g}),f&&e.jsx("p",{className:"text-xs text-sky-400 mt-1",children:"Buscando..."})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Rua"}),e.jsx("input",{type:"text",value:r.street,onChange:i=>c({...r,street:i.target.value}),placeholder:"Nome da rua",className:g})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"N√∫mero"}),e.jsx("input",{type:"text",value:r.number,onChange:i=>c({...r,number:i.target.value}),placeholder:"123",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Complemento"}),e.jsx("input",{type:"text",value:r.complement,onChange:i=>c({...r,complement:i.target.value}),placeholder:"Apto, bloco...",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Bairro"}),e.jsx("input",{type:"text",value:r.neighborhood,onChange:i=>c({...r,neighborhood:i.target.value}),placeholder:"Bairro",className:g})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Cidade"}),e.jsx("input",{type:"text",value:r.city,onChange:i=>c({...r,city:i.target.value}),placeholder:"Cidade",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Estado"}),e.jsx("input",{type:"text",value:r.state,onChange:i=>c({...r,state:i.target.value.toUpperCase().slice(0,2)}),placeholder:"SP",maxLength:2,className:`${g} uppercase`})]})]})]})]})]})},pe=({paymentMethod:r,setPaymentMethod:c,error:v,success:x,pixData:f,setPixData:g,pixCopied:i,copyToClipboard:I,cardData:b,setCardData:z,cardErrors:t,setCardErrors:C,formatCardNumber:T,formatExpiryDate:l,fetchInstallments:$,installments:P,selectedInstallment:_,setSelectedInstallment:d,total:R,isProcessing:j,handleCardPayment:S,handlePixPayment:V})=>{const w=p=>`w-full px-4 py-2.5 rounded-lg bg-zinc-800 border text-white placeholder-zinc-500 focus:outline-none focus:ring-2 transition-all ${p?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-zinc-600 focus:border-sky-500 focus:ring-sky-500/20"}`;return e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-700/80 p-6 mb-6 shadow-xl",children:[e.jsx("h2",{className:"font-semibold text-lg mb-4 text-white",children:"M√©todo de Pagamento"}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-zinc-700",children:[e.jsx("button",{onClick:()=>{c("card"),g(null)},className:`pb-3 font-medium text-sm px-2 border-b-2 transition-all ${r==="card"?"border-sky-500 text-sky-400":"border-transparent text-zinc-400 hover:text-zinc-200"}`,children:"üí≥ Cart√£o de Cr√©dito"}),e.jsx("button",{onClick:()=>c("pix"),className:`pb-3 font-medium text-sm px-2 border-b-2 transition-all ${r==="pix"?"border-sky-500 text-sky-400":"border-transparent text-zinc-400 hover:text-zinc-200"}`,children:"üéØ Pix"})]}),v&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex gap-2 text-sm text-red-400",children:[e.jsx(le,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:v})]}),x&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-green-500/10 border border-green-500/30 flex gap-2 text-sm text-green-400",children:[e.jsx(ie,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:"Pagamento realizado com sucesso!"})]}),r==="card"&&e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"N√∫mero do Cart√£o"}),e.jsx("input",{type:"text",value:b.cardNumber,onChange:p=>{z({...b,cardNumber:T(p.target.value)}),t.cardNumber&&C({...t,cardNumber:""})},onBlur:$,placeholder:"0000 0000 0000 0000",maxLength:19,className:`${w(!!t.cardNumber)} text-lg tracking-wider`}),t.cardNumber&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t.cardNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Nome do Titular"}),e.jsx("input",{type:"text",value:b.cardholderName,onChange:p=>{z({...b,cardholderName:p.target.value}),t.cardholderName&&C({...t,cardholderName:""})},placeholder:"NOME SOBRENOME",className:`${w(!!t.cardholderName)} text-sm uppercase`}),t.cardholderName&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t.cardholderName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Validade"}),e.jsx("input",{type:"text",value:b.expiryDate,onChange:p=>{z({...b,expiryDate:l(p.target.value)}),t.expiryDate&&C({...t,expiryDate:""})},placeholder:"MM/YY",maxLength:5,className:`${w(!!t.expiryDate)} text-lg tracking-wider`}),t.expiryDate&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t.expiryDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"CVV"}),e.jsx("input",{type:"text",value:b.cvv,onChange:p=>{z({...b,cvv:p.target.value.replace(/\D/g,"").slice(0,4)}),t.cvv&&C({...t,cvv:""})},placeholder:"000",maxLength:4,className:`${w(!!t.cvv)} text-lg tracking-wider`}),t.cvv&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t.cvv})]})]}),P.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Parcelamento"}),e.jsx("select",{value:(_==null?void 0:_.recommended_message)||"",onChange:p=>d(P.find(y=>y.recommended_message===p.target.value)),className:"w-full px-4 py-2.5 rounded-lg bg-zinc-800 border border-zinc-600 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/20 text-sm",children:P.map((p,y)=>e.jsx("option",{value:p.recommended_message,children:p.recommended_message},y))})]}),e.jsxs("button",{type:"submit",disabled:j||x,className:"w-full py-3 bg-sky-500 hover:bg-sky-600 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[j&&e.jsx(U,{className:"h-5 w-5 animate-spin"}),j?"Processando...":`Pagar R$ ${R.toFixed(2)}`]})]}),r==="pix"&&e.jsx("div",{className:"space-y-4",children:f?e.jsxs("div",{className:"space-y-4 p-4 bg-zinc-800/50 rounded-xl border border-zinc-600",children:[f.qr_code_base64&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("img",{src:`data:image/png;base64,${f.qr_code_base64}`,alt:"QR Pix",className:"w-64 h-64 border-2 border-primary p-2 rounded-lg"}),e.jsx("p",{className:"text-center text-sm text-zinc-400",children:"Escaneie o c√≥digo com o seu banco ou app de Pix"})]}),f.qr_copy_text&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-zinc-300",children:"Ou copie o c√≥digo:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{readOnly:!0,value:f.qr_copy_text,className:"flex-1 px-4 py-2 rounded-lg bg-zinc-800 border border-zinc-600 text-zinc-200 text-xs font-mono"}),e.jsxs("button",{onClick:()=>I(f.qr_copy_text),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${i?"bg-green-600 text-white":"bg-sky-500 hover:bg-sky-600 text-white"}`,children:[e.jsx(de,{className:"h-4 w-4"}),i?"Copiado!":"Copiar"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-zinc-800/80 rounded-lg border border-zinc-600",children:e.jsx("p",{className:"text-sm text-zinc-400",children:"‚è±Ô∏è Voc√™ tem 30 minutos para realizar o pagamento"})}),e.jsx("button",{onClick:()=>{g(null),c("card")},className:"w-full py-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 rounded-lg transition-all text-sm",children:"Voltar e escolher outro m√©todo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Gere um c√≥digo Pix para completar sua compra. Voc√™ ter√° 30 minutos para pagar."}),e.jsxs("button",{onClick:V,disabled:j,className:"w-full py-3 bg-sky-500 hover:bg-sky-600 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[j&&e.jsx(U,{className:"h-5 w-5 animate-spin"}),j?"Gerando...":"üéØ Gerar C√≥digo Pix"]})]})})]})},ke=()=>{const r=re(),{items:c,removeFromCart:v,total:x,clearCart:f}=oe();u.useState("shipping");const[g,i]=u.useState("card"),[I,b]=u.useState(!1),[z,t]=u.useState(""),[C,T]=u.useState(!1),[l,$]=u.useState({email:"",name:"",phone:"",cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""});u.useState({});const[P,_]=u.useState(!1),[d,R]=u.useState({cardNumber:"",cardholderName:"",expiryDate:"",cvv:""}),[j,S]=u.useState({}),[V,w]=u.useState(!1),p="APP_USR-99ef08de-7c02-4e4a-910e-c9bb3801b437",y="http://localhost:3000",[K,M]=u.useState([]),[E,L]=u.useState(null),[X,q]=u.useState(null),[G,A]=u.useState(!1);u.useEffect(()=>{c.length===0&&r("/")},[c.length,r]),u.useEffect(()=>{const n="mp-sdk-js";if(document.getElementById(n)){try{window.Mercadopago.setPublishableKey(p),w(!0)}catch{}return}const a=document.createElement("script");a.id=n,a.src="https://secure.mlstatic.com/sdk/javascript/v1/mercadopago.js",a.async=!0,a.onload=()=>{try{window.Mercadopago.setPublishableKey(p),w(!0)}catch(h){console.error("Erro ao inicializar MercadoPago SDK:",h)}},a.onerror=h=>console.error("Falha ao carregar SDK MercadoPago",h),document.head.appendChild(a)},[]);const Q=n=>{var a;(a=navigator.clipboard)==null||a.writeText(n),A(!0),setTimeout(()=>A(!1),2e3)},J=async n=>{const a=n.replace(/\D/g,"");if(a.length===8){_(!0);try{const o=await(await fetch(`https://viacep.com.br/ws/${a}/json/`)).json();o.erro||$(s=>({...s,street:o.logradouro||s.street,neighborhood:o.bairro||s.neighborhood,city:o.localidade||s.city,state:o.uf||s.state}))}catch{}finally{_(!1)}}},H=n=>n.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").slice(0,9),W=async()=>{var n,a,h;if(!l.email||!l.name||!l.phone){t("Por favor, preencha todos os dados de entrega antes de gerar o PIX");return}if(!l.cep||!l.street||!l.number||!l.city||!l.state){t("Por favor, preencha o endere√ßo completo (CEP, rua, n√∫mero, cidade e estado)");return}b(!0),t("");try{const o=await fetch(`${y}/api/create-pix`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:x,description:`Pagamento via PIX - ${c.length} item(ns)`,payer:{email:l.email,name:l.name,phone:l.phone}})});if(!o.ok)try{const m=await o.json();throw new Error(m.error||m.message||`Erro do servidor: ${o.status}`)}catch{throw o.status===0||o.status>=500?new Error(`Servidor n√£o est√° respondendo em ${y}. Em produ√ß√£o, configure VITE_API_BASE_URL na Vercel.`):o.status===405?new Error("M√©todo n√£o permitido (405). Confira na Vercel: vari√°vel VITE_API_BASE_URL (com underscore), URL do Railway sem barra no final. Depois fa√ßa Redeploy."):new Error(`Erro ao conectar com o servidor: ${o.statusText}`)}const s=await o.json();if(s.success){const m=(n=s.point_of_interaction)==null?void 0:n.transaction_data;m?(q({qr_code_base64:m.qr_code_base64,qr_copy_text:m.qr_code||m.qr_code_text,id:s.id,status:s.status,ticket_url:m.ticket_url}),t("")):t("QR Code n√£o dispon√≠vel na resposta do servidor")}else t(s.error||s.message||"Erro ao criar pagamento PIX")}catch(o){if(console.error("Erro ao criar PIX:",o),(a=o.message)!=null&&a.includes("Failed to fetch")||(h=o.message)!=null&&h.includes("NetworkError")){const s=typeof window<"u"&&!window.location.hostname.includes("localhost");t(s?"N√£o foi poss√≠vel conectar √† API de pagamento. Configure a vari√°vel VITE_API_BASE_URL na Vercel com a URL do seu backend.":`N√£o foi poss√≠vel conectar ao servidor. Verifique se o backend est√° rodando em ${y}`)}else o.message?t(o.message):t("Erro ao criar pagamento PIX. Tente novamente.")}finally{b(!1)}},Z=n=>n.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim().slice(0,19),D=n=>{const a=n.replace(/\D/g,"").slice(0,4);return a.length>=2?`${a.slice(0,2)}/${a.slice(2)}`:a},ee=n=>{const a=n.replace(/\s/g,"");if(!/^\d{13,19}$/.test(a))return!1;let h=0,o=!1;for(let s=a.length-1;s>=0;s--){let m=parseInt(a[s],10);o&&(m*=2,m>9&&(m-=9)),h+=m,o=!o}return h%10===0},te=()=>{const n={};if(d.cardNumber.trim()?ee(d.cardNumber)||(n.cardNumber="N√∫mero do cart√£o inv√°lido"):n.cardNumber="N√∫mero do cart√£o √© obrigat√≥rio",d.cardholderName.trim()||(n.cardholderName="Nome do titular √© obrigat√≥rio"),!d.expiryDate.trim())n.expiryDate="Data de validade √© obrigat√≥ria";else{const[a,h]=d.expiryDate.split("/"),o=new Date,s=o.getFullYear()%100,m=o.getMonth()+1,k=parseInt(h,10),N=parseInt(a,10);isNaN(N)||isNaN(k)||N<1||N>12?n.expiryDate="Data inv√°lida":(k<s||k===s&&N<m)&&(n.expiryDate="Cart√£o expirado")}return d.cvv.trim()?/^\d{3,4}$/.test(d.cvv)||(n.cvv="CVV inv√°lido"):n.cvv="CVV √© obrigat√≥rio",S(n),Object.keys(n).length===0},se=async()=>{var h;const a=d.cardNumber.replace(/\s/g,"").slice(0,6);if(a.length<6){S({...j,cardNumber:"Informe pelo menos 6 d√≠gitos"});return}try{const s=await(await fetch(`${y}/api/installments?bin=${encodeURIComponent(a)}&amount=${encodeURIComponent(String(x))}`)).json();s.success&&s.data&&((h=s.data[0])!=null&&h.payer_costs)?(M(s.data[0].payer_costs),L(s.data[0].payer_costs[0])):(M([]),L(null))}catch(o){console.error("Erro ao buscar parcelamento:",o)}},ae=async n=>{if(n.preventDefault(),!l.email||!l.name||!l.phone){t("Preencha todos os dados de entrega.");return}if(!l.cep||!l.street||!l.number||!l.city||!l.state){t("Preencha o endere√ßo completo (CEP, rua, n√∫mero, cidade e estado).");return}if(te()){b(!0),t("");try{let a;if(V&&window.Mercadopago){const s=window.Mercadopago,m={cardNumber:d.cardNumber.replace(/\s/g,""),expirationMonth:String(d.expiryDate.split("/")[0]),expirationYear:String(d.expiryDate.split("/")[1]),securityCode:d.cvv,cardholderName:d.cardholderName};a=await new Promise(k=>{try{s.createToken(m,(N,F)=>{N===200||N===201?k(F.id):(console.error("Erro tokenizacao MP",N,F),k(void 0))})}catch(N){console.error("Erro ao tokenizar cart√£o:",N),k(void 0)}})}const o=await(await fetch(`${y}/api/create-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:c.map(s=>({id:s.id,title:s.name,quantity:s.quantity,unit_price:s.price})),payer:l,installments:(E==null?void 0:E.installments)||1,card:a?{token:a}:{number:d.cardNumber.replace(/\s/g,""),holder_name:d.cardholderName,expiration_month:parseInt(d.expiryDate.split("/")[0]),expiration_year:parseInt(d.expiryDate.split("/")[1]),security_code:d.cvv}})})).json();if(o.success){T(!0);const s=[...c],m=x;f(),setTimeout(()=>{r("/checkout/sucesso",{state:{orderId:o.orderId||"success",total:m,items:s}})},2e3)}else t(o.message||"Erro ao processar pagamento")}catch(a){console.error("Erro:",a),t("Erro ao processar pagamento. Tente novamente.")}finally{b(!1)}}};return c.length===0?e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col",children:[e.jsx(B,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center pt-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-display mb-4 text-white",children:"Carrinho vazio"}),e.jsx("button",{onClick:()=>r("/#produtos"),className:"px-6 py-3 bg-sky-500 text-white rounded-lg hover:bg-sky-600 font-medium",children:"Voltar aos produtos"})]})}),e.jsx(O,{})]}):e.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col",children:[e.jsx(B,{}),e.jsx("main",{className:"flex-1 pt-24 pb-16 bg-zinc-950",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold mb-8 text-white",children:"Finalizar Compra"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1 order-2 lg:order-1",children:e.jsx(me,{items:c,total:x,removeFromCart:v})}),e.jsxs("div",{className:"lg:col-span-2 order-1 lg:order-2",children:[e.jsx(xe,{customerData:l,setCustomerData:$,fetchAddressByCep:J,formatCep:H,loadingCep:P}),e.jsx(pe,{paymentMethod:g,setPaymentMethod:n=>{i(n),t("")},error:z,success:C,pixData:X,setPixData:q,pixCopied:G,copyToClipboard:Q,cardData:d,setCardData:R,cardErrors:j,setCardErrors:S,formatCardNumber:Z,formatExpiryDate:D,fetchInstallments:se,installments:K,selectedInstallment:E,setSelectedInstallment:L,total:x,isProcessing:I,handleCardPayment:ae,handlePixPayment:W}),e.jsx("button",{onClick:()=>r("/#produtos"),className:"w-full py-2.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-200 rounded-lg border border-zinc-600 transition-all text-sm",children:"‚Üê Continuar comprando"})]})]})]})}),e.jsx(O,{})]})};export{ke as default};
