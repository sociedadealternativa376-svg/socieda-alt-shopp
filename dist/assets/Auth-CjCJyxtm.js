import{c as Y,r as i,u as Z,w as _,x as $,j as e,y as a}from"./index-Bpz0FMYO.js";import{o as ee,s as se,u as S,E,a as C,P as ae,t as F,v as re,l as te,b as oe}from"./PasswordStrengthIndicator-Bajs4MG3.js";import{B as n}from"./button-DIaYmcs-.js";import{I as c}from"./input-DG_X0Bn_.js";import{L as m}from"./label-0tM5ApCS.js";import{l as le}from"./logo-CU3fsl7Q.js";import{A as ie}from"./arrow-left-BhbEz2om.js";import{M as w}from"./mail-CumSC8Q6.js";import{L as g}from"./loader-circle-z9yUUUXF.js";import{L as V}from"./lock-B0Pbul_F.js";import{U as ne}from"./user-BHbKF2ND.js";import{S as ce}from"./sparkles-E3HocHw1.js";import"./check-C7VJxLvu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=Y("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),de=ee({email:se().email("Email inválido")}),Ee=()=>{const[o,P]=i.useState("login"),[d,k]=i.useState(!1),[y,G]=i.useState(!1),[u,x]=i.useState(!1),[L,z]=i.useState(""),[M,b]=i.useState(!1),j=Z(),q=_(),{user:A,signIn:H,signUp:U,signInWithGoogle:R,resetPassword:D}=$(),[v,B]=i.useState(!1),h=q.state,I=(h==null?void 0:h.from)||"/",K=h==null?void 0:h.orderData;i.useEffect(()=>{A&&j(I)},[A,j,I,K]);const l=S({resolver:F(te),defaultValues:{email:"",password:""}}),r=S({resolver:F(oe),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}}),p=S({resolver:F(de),defaultValues:{email:""}}),J=async s=>{x(!0);try{const{error:t}=await H(s.email,s.password);t?t.message.includes("Invalid login credentials")?a.error("Email ou senha incorretos. Verifique suas credenciais."):t.message.includes("Email not confirmed")?a.error("Email não confirmado. Verifique sua caixa de entrada."):a.error(t.message):(a.success("Login realizado com sucesso!"),j("/"))}catch{a.error("Erro ao fazer login. Tente novamente.")}finally{x(!1)}},O=async s=>{const t=re(s.password);if(!t.isValid){a.error(t.errors[0]);return}x(!0);try{const{error:f}=await U(s.email,s.password,s.fullName);f?f.message.includes("User already registered")?a.error("Este email já está cadastrado. Faça login ou use outro email."):f.message.includes("Password should be at least")?a.error("A senha não atende aos requisitos mínimos de segurança."):a.error(f.message):(a.success("Cadastro realizado com sucesso! Verifique seu email para confirmar."),P("login"),l.setValue("email",s.email))}catch{a.error("Erro ao criar conta. Tente novamente.")}finally{x(!1)}},W=async s=>{x(!0);try{const{error:t}=await D(s.email);t?a.error(t.message||"Erro ao enviar email de recuperação."):(b(!0),a.success("Email de recuperação enviado!"))}catch{a.error("Erro ao enviar email. Tente novamente.")}finally{x(!1)}},T=async()=>{B(!0);try{const{error:s}=await R();s&&a.error(s.message||"Erro ao fazer login com Google.")}catch{a.error("Erro ao fazer login com Google. Tente novamente.")}finally{B(!1)}},N=s=>{P(s),z(""),b(!1),l.reset(),r.reset(),p.reset()},Q=()=>{switch(o){case"login":return"Bem-vindo de volta";case"signup":return"Criar conta";case"forgot":return"Recuperar senha"}},X=()=>{switch(o){case"login":return"Entre com suas credenciais para continuar";case"signup":return"Preencha os dados para criar sua conta";case"forgot":return M?"Verifique sua caixa de entrada":"Enviaremos um link para redefinir sua senha"}};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-warm-orange/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs(n,{variant:"ghost",onClick:()=>o==="forgot"?N("login"):j("/"),className:"mb-6 text-muted-foreground hover:text-foreground",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),o==="forgot"?"Voltar para login":"Voltar para a loja"]}),e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:le,alt:"Logo",className:"h-16 w-auto"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-display gradient-text mb-2",children:Q()}),e.jsx("p",{className:"text-muted-foreground text-sm",children:X()})]}),o==="forgot"?M?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 text-green-500"})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enviamos um email para ",e.jsx("strong",{children:p.getValues("email")})," com instruções para redefinir sua senha."]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Não recebeu? Verifique sua pasta de spam ou",e.jsx("button",{type:"button",onClick:()=>b(!1),className:"ml-1 text-primary hover:underline",children:"tente novamente"})]}),e.jsx(n,{onClick:()=>N("login"),variant:"outline",className:"w-full mt-4",children:"Voltar para login"})]}):e.jsxs("form",{onSubmit:p.handleSubmit(W),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"forgot-email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"forgot-email",type:"email",placeholder:"seu@email.com",className:"pl-10",...p.register("email")})]}),p.formState.errors.email&&e.jsx("p",{className:"text-xs text-destructive",children:p.formState.errors.email.message})]}),e.jsx(n,{type:"submit",className:"w-full bg-gradient-to-r from-warm-yellow via-warm-orange to-warm-red hover:opacity-90",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Enviar link de recuperação"]})})]}):o==="login"?e.jsxs("form",{onSubmit:l.handleSubmit(J),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"login-email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"login-email",type:"email",placeholder:"seu@email.com",className:"pl-10",...l.register("email")})]}),l.formState.errors.email&&e.jsx("p",{className:"text-xs text-destructive",children:l.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"login-password",children:"Senha"}),e.jsx("button",{type:"button",onClick:()=>N("forgot"),className:"text-xs text-primary hover:underline",children:"Esqueceu a senha?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"login-password",type:d?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...l.register("password")}),e.jsx("button",{type:"button",onClick:()=>k(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(E,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]}),l.formState.errors.password&&e.jsx("p",{className:"text-xs text-destructive",children:l.formState.errors.password.message})]}),e.jsx(n,{type:"submit",className:"w-full bg-gradient-to-r from-warm-yellow via-warm-orange to-warm-red hover:opacity-90",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Entrando..."]}):"Entrar"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"ou continue com"})})]}),e.jsxs(n,{type:"button",variant:"outline",className:"w-full",onClick:T,disabled:v,children:[v?e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}):e.jsxs("form",{onSubmit:r.handleSubmit(O),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"signup-name",children:"Nome completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"signup-name",type:"text",placeholder:"Seu nome",className:"pl-10",...r.register("fullName")})]}),r.formState.errors.fullName&&e.jsx("p",{className:"text-xs text-destructive",children:r.formState.errors.fullName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"signup-email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"signup-email",type:"email",placeholder:"seu@email.com",className:"pl-10",...r.register("email")})]}),r.formState.errors.email&&e.jsx("p",{className:"text-xs text-destructive",children:r.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"signup-password",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"signup-password",type:d?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...r.register("password"),onChange:s=>{r.register("password").onChange(s),z(s.target.value)}}),e.jsx("button",{type:"button",onClick:()=>k(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(E,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]}),r.formState.errors.password&&e.jsx("p",{className:"text-xs text-destructive",children:r.formState.errors.password.message})]}),L&&e.jsx(ae,{password:L}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"signup-confirm",children:"Confirmar senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{id:"signup-confirm",type:y?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...r.register("confirmPassword")}),e.jsx("button",{type:"button",onClick:()=>G(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:y?e.jsx(E,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]}),r.formState.errors.confirmPassword&&e.jsx("p",{className:"text-xs text-destructive",children:r.formState.errors.confirmPassword.message})]}),e.jsx(n,{type:"submit",className:"w-full bg-gradient-to-r from-warm-yellow via-warm-orange to-warm-red hover:opacity-90",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Criando conta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Criar conta"]})}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"ou cadastre-se com"})})]}),e.jsxs(n,{type:"button",variant:"outline",className:"w-full",onClick:T,disabled:v,children:[v?e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]}),o!=="forgot"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o==="login"?"Não tem uma conta?":"Já tem uma conta?",e.jsx("button",{type:"button",onClick:()=>N(o==="login"?"signup":"login"),className:"ml-1 text-primary hover:underline font-medium",children:o==="login"?"Criar conta":"Fazer login"})]})})]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-6",children:["Ao criar uma conta, você concorda com nossos"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Termos de Uso"})," ","e"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Política de Privacidade"})]})]})]})};export{Ee as default};
